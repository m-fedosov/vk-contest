# –°–µ—Ä–≤–∏—Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤

------
**TLDR:**
–≠—Ç–æ —Ç–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ –¥–ª—è —Å—Ç–∞–∂–∏—Ä–æ–≤–∫–∏ PHP-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –≤ –í–ö. –ù—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–∏—Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —á–µ—Ç—ã—Ä–µ—Ö API –º–µ—Ç–æ–¥–æ–≤: POST, PUT, GET –∏ DELETE. –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π, –∞ —Ç–∞–∫–∂–µ –ø–æ–ª—É—á–∏—Ç—å –ø–æ–ª–Ω–æ–µ –¥–µ—Ä–µ–≤–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤.

## üõ† Tech stack

------
**TL;DR: Symfony, MySQL, Nginx, Api Platform, Docker Compose**

–°–µ—Ä–≤–∏c —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –Ω–∞ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–µ **Symfony**, –≤ –ø–∞—Ä–µ —Å –Ω–∏–º –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –°–£–ë–î **Mysgl** –∏ —Å–µ—Ä–≤–µ—Ä **Nginx**, —Ç–∞–∫–∂–µ –µ—Å—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫–∞ **Open API** —Å –ø–æ–º–æ—â—å—é API Platform.

## üîÆ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

------
1. Install [Docker](https://www.docker.com/get-started/)
2. Clone the repo
```bash
$ git clone https://github.com/m-fedosov/vk-contest.git
$ cd vk-contest
```
3. Run
```bash
$ docker-compose up
```
–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è —Å–µ—Ä–≤–∏—Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ —Å –ø–æ–¥–∫–ª—é—á—ë–Ω–Ω–æ–π –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö –∏ Nginx —Å–µ—Ä–≤–µ—Ä. –ü–µ—Ä–µ—Ö–æ–¥–∏–º –ø–æ –∞–¥—Ä–µ—Å—É http://localhost/api –∏ –ø–æ–ª—É—á–∞–µ–º –¥–æ—Å—Ç—É–ø –∫ Open API. 

–ï—Å–ª–∏ –≤—Å—ë —Å–ª–æ–º–∞–ª–æ—Å—å, –ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ–º –ø—Ä–æ–µ–∫—Ç:

```bash
$ docker-compose up --build -d
```

–í–æ–∑–º–æ–∂–Ω–æ –Ω–µ —Å–æ–∑–¥–∞–Ω—ã —Ç–∞–±–ª–∏—Ü—ã Comment –∏ User, —Å–æ–∑–¥–∞—ë–º:
```bash
$ docker compose exec php-cli ./bin/console doctrine:schema:create
```

–ò –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∏—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ Symfony:
```bash
$ docker compose exec php-cli ./bin/console make:migration -n
$ docker compose exec php-cli ./bin/console doctrine:migrations:migrate -n
```

## ‚òÑÔ∏è –†–∞–±–æ—Ç–∞ —Å —Å–µ—Ä–≤–∏—Å–æ–º

------
–ü–æ—Å–∫–æ–ª—å–∫—É –≤—Ö–æ–¥–Ω—ã–µ –∏ –≤—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON. –¢–æ —É–¥–æ–±–Ω–µ–µ –≤—Å–µ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–æ–≤–∞—Ç—å —Å —Å–µ—Ä–≤–∏—Å–æ–º —á–µ—Ä–µ–∑ **Postman** –∏–ª–∏ **Insomnia**. 

–î–ª—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω—É–∂–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å Content-Type: application/json (–î–ª—è Insomnia –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ headers –∑–∞–ø—Ä–æ—Å –∏ —É–∫–∞–∂–∏—Ç–µ —ç—Ç–æ –ø–æ–ª–µ)

#### –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤:
1. –°–æ–∑–¥–∞–¥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

   **Post** –∑–∞–ø—Ä–æ—Å –ø–æ –∞–¥—Ä–µ—Å—É http://localhost/api/register

```json
{
  "email": "yeaaahbudddy@vk.com",
  "password": "wow_so_secret"
}
```

2. –ü–æ–ª—É—á–∏–º JWT —Ç–æ–∫–µ–Ω –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
   
   **Post** –∑–∞–ø—Ä–æ—Å –ø–æ –∞–¥—Ä–µ—Å—É http://localhost/api/login_check

```json
{
  "email": "yeaaahbudddy@vk.com",
  "password": "wow_so_secret"
}
```

–í –æ—Ç–≤–µ—Ç–µ –ø–æ–ª—É—á–∏–º —Ç–æ–∫–µ–Ω –≤ —Ñ–æ—Ä–º–∞—Ç–µ Json:
```json
{
  "token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJpYXQiOjE2ODM5MDIwMjEsImV4cCI6MTY4MzkwNTYyMSwicm9sZXMiOlsiUk9MRV9VU0VSIl0sInVzZXJuYW1lIjoiZmVkb3NtaWtlMUBnbWFpbC5jb20ifQ.MZK0YgMt7E3Yn5c89M2lC394GSkLFf90DmDSOCzVCrpu4ZVycukFyOK1EzrKEd90dGsQgW3Sj8u0cWYILuLvsK-0V8zJA45BdDrq3tnefRsUq5zcAO1-c2S5FVs8fNQDv0qlzhL9c2z9GfRK7l4Q72vCkGPonOpwD5df9oT3TszJh13EaVDJ-4h8uVOJoploj98bYIYDapknJsuhgIxL0XsXry8f93am0YBrnOjBwdztKMHkETkpom77hVfAeq6QXiTvNuWYb3g50Qf45hsaCZcuxkR61vZb3DiWT5qy_H0ve2mrmelXGv0FCG008xou69HydegM9umJ2qzmUXoH1Q"
}
```

–≠—Ç–æ—Ç —Ç–æ–∫–µ–Ω —Å—Ç–æ–∏—Ç –¥–æ–±–∞–≤–∏—Ç—å –≤ env –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é —Å–≤–æ–µ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞. –î–ª—è Insomnia: Ctrl+E –∏ —Ç–∞–∫ –∏ –≤—Å—Ç–∞–≤–ª—è–µ–º (that's what she said)

4. –ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏ –º–æ–∂–Ω–æ –æ–±—Ä–∞—â–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –î–ª—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ `\comment` –Ω—É–∂–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å Authorization: Bearer {{token}} (–î–ª—è Insomnia –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ headers –∑–∞–ø—Ä–æ—Å –∏ —É–∫–∞–∂–∏—Ç–µ —ç—Ç–æ –ø–æ–ª–µ). –í –∏—Ç–æ–≥–µ –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã 2 –ø–æ–ª—è: Authorization –∏ Content-Type

5. –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è

   **Post** –∑–∞–ø—Ä–æ—Å –ø–æ –∞–¥—Ä–µ—Å—É http://localhost/comment

```json
{
	"text": "8 800 555 35 35"
}
```

–ú–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å id —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è, —Ç–æ–≥–¥–∞ —ç—Ç–æ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –±—É–¥–µ—Ç –æ—Ç–≤–µ—Ç–æ–º

```json
{
  "text": "call me baby",
  "parent_id": 2
}
```
6. –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è:

   **Get** –∑–∞–ø—Ä–æ—Å –ø–æ –∞–¥—Ä–µ—Å—É http://localhost/comment/{id}
    
   –í –æ—Ç–≤–µ—Ç–µ –ø–æ–ª—É—á–∏–º –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∏ –ø–æ–ª–Ω–æ–µ –¥–µ—Ä–µ–≤–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –≤ –≤–∏–¥–µ Json
```json
{
  "id": 4,
  "text": "your second comment is dumb",
  "created_at": "2023-05-12 07:07:54",
  "user_id": 6,
  "parent_comment": {
    "id": 2,
    "text": "hey, my second comment",
    "created_at": "2023-05-12 07:07:30",
    "user_id": 6,
    "parent_comment": {
      "id": 1,
      "text": "edit comment",
      "created_at": "2023-05-12 07:07:21",
      "user_id": 6,
      "parent_comment": null
    }
  }
}
```

7. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è: 

   **Put** –∑–∞–ø—Ä–æ—Å –ø–æ –∞–¥—Ä–µ—Å—É http://localhost/comment/{id}

    –ú—ã –ø–æ–º–Ω–∏–º –ø—Ä–æ —Ç–æ, —á—Ç–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ —Ç–æ–∫–µ–Ω–∞–º –∑–∞–≥–æ–ª–æ–≤–∫–∞, —Ç–∞–∫ —á—Ç–æ –æ—Å—Ç–∞—ë—Ç—Å—è –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ç–µ–∫—Å—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è. –ï—Å—Ç–µ—Ç–≤–µ–Ω–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –º–æ–∂–Ω–æ —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏:

```json
{
  "text": "edit comment"
}
```

8. –£–¥–∞–ª–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è: 

   **Delete** –∑–∞–ø—Ä–æ—Å –ø–æ –∞–¥—Ä–µ—Å—É http://localhost/comment/{id}

    –£–¥–∞–ª—è—Ç—å —Ç–æ–∂–µ –º–æ–∂–Ω–æ —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏, –Ω–∏–∫–∞–∫–æ–π Json –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –Ω–µ –Ω—É–∂–Ω–æ :)


**–í—Å—ë**

## üë©‚Äçüíº License

------
MIT

–î—Ä—É–≥–∏–º–∏ —Å–ª–æ–≤–∞–º–∏, –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–¥ –≤ —á–∞—Å—Ç–Ω—ã—Ö –∏ –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏—Ö —Ü–µ–ª—è—Ö —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∞–≤—Ç–æ—Ä—Å—Ç–≤–∞.

–ù–µ —Å—Ç–µ—Å–Ω—è–π—Ç–µ—Å—å –Ω–∞–ø–∏—Å–∞—Ç—å –º–Ω–µ –Ω–∞ –ø–æ—á—Ç—É: [mifedosov@miem.hse.ru](mailto:mifedosov@miem.hse.ru)

‚ù§Ô∏è
